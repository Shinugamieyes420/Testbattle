@font-face {
    font-family: 'Pokemon Pixel';
    src: url('https://fonts.gstatic.com/s/pressstart2p/v15/e3t4euO8T-267oIAQAu6jDQyK3nVivM.woff2') format('woff2');
    font-weight: normal; font-style: normal;
}
:root {
    --hp-high-color: #32CD32; --hp-medium-color: #FFD700; --hp-low-color: #DC143C;
    --bg-main-menu: linear-gradient(135deg, #4F89B2, #67B2D4);
    --bg-trainer-display: rgba(255, 255, 255, 0.15);
    --bg-trainer-frame: #79A8C2;
    --border-trainer-frame: #FFD700;
    --shadow-trainer-frame: #DAA520;
    --text-color-default: #FFF; --text-color-dark: #222;
    --bg-dialog: #2c3e50; --border-dialog: #34495e;
    --button-subtle-bg: #526476; --button-subtle-border: #3e4c5a; --button-subtle-shadow: #2a333c; --button-subtle-hover: #607488;
    --bg-options-menu: #2d3436;
    --battle-ui-bg: rgba(25, 25, 30, 0.9); /* Iets meer solide */
    --battle-ui-border: #4a4a52;
    --battle-info-box-bg: rgba(35, 35, 40, 0.88); /* Iets meer solide */
    --battle-info-box-border: #5c5c66;
    --battle-text-color: #f0f0f0;
    --battle-button-bg: #4a5568;
    --battle-button-hover-bg: #5a677d;
    --battle-button-border: #6a7588;
    --status-brn-color: #FF4500;
    --status-psn-color: #A040A0;
    --status-par-color: #FFDB58;
    --status-slp-color: #A8A8A8;
    --status-frz-color: #ADD8E6;

    --item-icon-pokeball: url('https://www.serebii.net/itemdex/sprites/sv/pokeball.png');
    --item-icon-greatball: url('https://www.serebii.net/itemdex/sprites/sv/greatball.png');
    --item-icon-evolutionstone: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIj48cGF0aCBmaWxsPSIjRkZBRjAwIiBkPSJNMTIgMi42NWwtMi4wOTEgNC4yMDkgNC42NjcgMi4xODItMi41NzYgNi4zOTIgNi4xODQgMS4wMzktMy41NzkgNS40MDctNC45NTUtNC4wNjUtNC45NTUgNC4wNjUtMy41NzktNS40MDcgNi4xODQtMS4wMzktMi41NzYtNi4zOTIgNC42NjctMi4xODJ6Ii8+PHBhdGggZmlsbD0iI0ZGRDg4MiIgZD0iTTEyIDRsLTEuNSA0IDQgMi0yIDUtNSAyLTEuNS01IDEuNS01LTUgMi0yLTQtMS41LTQgMS41IDIgMyA0IDMtNC0zLTQtMyAyIDUgMiA1eiIvPjwvc3ZnPg==');
    --item-icon-tcgpack: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjMDA3NUJGIiBkPSJNMjAuNSA0LjVIMy41QzIuNjcgNC41IDIgNS4xNyAyIDZWMTlDMiAxOS44MyAyLjY3IDIwLjUgMy41IDIwLjVIMjAuNUMyMS4zMyAyMC41IDIyIDE5LjgzIDIyIDE5VjdDMjIgNS4xNyAyMS4zMyA0LjUgMjAuNSA0LjVaTTQgN0gyMFYxMUg0VjdaTTQgMTNIMTBWMTVINFYxM1pNNCAxN0gxMFYxOUg0VjE3Wk0xMiAxM0gxNFYxNUgxMlYxM1pNMTYgMTNIMThWMTVIMTZWMTNaTTEyIDE3SDE0VjE5SDEyVjE3Wk0xNiAxN0gxOFYxOUgxNlYxN1oiLz48cGF0aCBmaWxsPSIjRkZDMzA5IiBkPSJNMjAgMTFWMThIMjFWMTEiLz48cGF0aCBmaWxsPSIjRkZDMzA5IiBkPSJNMjEgN0gyMFYxMEgyMVY3WiIvPjxwYXRoIGZpbGw9IiNGRkMzMDkiIGQ9Ik0xMiA4QzExLjQ1IDggMTEgOC40NSAxMSA5VjEwLjVDMTEgMTEuMDUsMTEuNDUgMTEuNSAxMiAxMS41QzEyLjU1IDExLjUgMTMgMTEuMDUgMTMgMTAuNVY5QzEzIDguNDUgMTIuNTUgOCAxMiA4WiIvPjwvc3ZnPg==');
    --pokeball-svg-battle: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ij48Y2lyY2xlIGN4PSIxMCIgY3k9IjEwIiByPSI5IiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxIi8+PHBhdGggZD0iTTEsMTAgYTksOSAwIDAsMSAxOCwwIiBmaWxsPSJyZWQiLz48cGF0aCBkPSJNMSwxMCBoMTgiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIvPjxjaXJjbGUgY3g9IjEwIiBjeT0iMTAiIHI9IjMiIGZpbGw9IndoaXRlIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjEiLz48Y2lyY2xlIGN4PSIxMCIgY3k9IjEwIiByPSIxLjUiIGZpbGw9IndoaXRlIi8+PC9zdmc+');
}
body.dark-mode { /* ... (dark mode variabelen blijven hetzelfde) ... */ }

body, html { height: 100%; margin: 0; padding: 0; background-color: #000; font-family: 'Pokemon Pixel', sans-serif; overflow: hidden; display: flex; align-items: center; justify-content: center; }
.game-container {
    aspect-ratio: 16 / 9;
    width: 100vw;
    height: calc(100vw * 9 / 16);
    max-width: 100vw;
    max-height: 100vh;
    background-color: #000; position: relative;
    image-rendering: pixelated; image-rendering: -moz-crisp-edges; image-rendering: crisp-edges;
    overflow: hidden; border: 2px solid #333; box-sizing: border-box;
    margin: auto;
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
    display: flex;
}
@media (max-aspect-ratio: 16/9) {
    .game-container {
        height: 100vh;
        width: calc(100vh * 16 / 9);
    }
}
body.dark-mode .game-container { border-color: #555; box-shadow: 0 0 15px rgba(100,100,100,0.3); }

.screen {
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    color: var(--text-color-default);
    box-sizing: border-box;
    overflow: hidden;
    padding: clamp(10px, 1.5vmin, 15px); /* Kleinere algemene padding */
}

.scrollable-content,
.trainers-grid,
.starters-grid,
.market-items-grid,
.inventory-grid,
.team-grid,
#pcTeamGrid,
#pcBoxGrid,
#teamSelectGrid,
#gymLeaderGrid,
#eliteFourGrid,
.cards-collection-grid,
.badges-collection-grid,
.switch-grid
{
    flex-grow: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    min-height: 0;
    padding-bottom: 1vmin;
    width: 100%;
    box-sizing: border-box;
}

.play-menu-content, .options-menu-content, .password-content-area,
.my-cards-content, .detail-content-area {
    flex-grow: 1;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    min-height: 0;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5vmin;
    padding: 1vmin;
    box-sizing: border-box;
}

.screen-back-button, #teamSelectConfirmButton,
#switchCancelButton, .detail-button-area {
    flex-shrink: 0;
    margin-top: auto;
    padding-top: 1.5vmin;
    padding-bottom: 1vmin;
    width: 100%;
    display: flex;
    justify-content: center;
    box-sizing: border-box;
}
.detail-button-area { gap: 2vmin; }
.detail-button-area button { width: auto; flex-grow: 1; max-width: 45%; }


#introScreen { padding: 0; }
/* ... (Intro screen stijlen blijven hetzelfde) ... */

#characterSelectScreen, #starterSelectScreen { background-color: #111; justify-content: flex-start; }
#characterSelectScreen h2, #starterSelectScreen h2 { font-size: clamp(1.5em, 5vmin, 2em); margin-top: 0; margin-bottom: 2vmin; text-align: center; flex-shrink: 0; }
.trainers-grid, .starters-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(clamp(120px, 30vw, 180px), 1fr)); width: 100%; max-width: 800px; gap: 3vmin; padding: 1vmin; }
/* ... (Trainer & Starter card stijlen blijven hetzelfde) ... */

/* ... (Dialog stijlen blijven hetzelfde) ... */

#mainMenuScreen {
    background: var(--bg-main-menu);
    flex-direction: column; padding: 2vmin;
    align-items: center;
    justify-content: space-between;
    gap: 1.5vmin;
    overflow: hidden;
}
/* ... (Rest van MainMenu stijlen blijven hetzelfde, submenu-tabs-container heeft al overflow-y: auto) ... */

#optionsMenuScreen, #playMenuScreen, #passwordScreen {
    background-color: var(--bg-options-menu); align-items: center;
    justify-content: space-between;
}
#marketScreen, #inventoryScreen, #teamScreen,
#teamSelectScreen, #gymLeaderSelectScreen, #gymLeaderDetailScreen,
#myCardsScreen, #starterSelectScreen, #pcBoxScreen,
#eliteFourSelectScreen, #eliteFourDetailScreen, #tcgCardsScreen {
    background-color: var(--bg-options-menu); align-items: center;
    justify-content: space-between;
}

#optionsMenuScreen h2, #playMenuScreen h2, #marketScreen h2,
#inventoryScreen h2, #teamScreen h2, #teamSelectScreen h2,
#gymLeaderSelectScreen h2, #gymLeaderDetailScreen h2, #myCardsScreen h2,
#starterSelectScreen h2, #pcBoxScreen h2,
#eliteFourSelectScreen h2, #eliteFourDetailScreen h2, #tcgCardsScreen h2,
#passwordScreen h2 {
    font-size: clamp(1.4em, 5vmin, 2.2em);
    margin-bottom: 1vmin;
    text-align: center;
    flex-shrink: 0;
}

#optionsMenuScreen .options-button, #playMenuScreen .play-mode-button,
#marketScreen .market-back-button, #inventoryScreen .inventory-back-button,
#teamScreen .team-back-button, #teamSelectScreen .team-select-button,
#gymLeaderSelectScreen .gym-leader-button, #gymLeaderDetailScreen .gym-detail-button,
#myCardsScreen .my-cards-back-button, #pcBoxScreen .pc-back-button,
#eliteFourSelectScreen .elite-four-button,
#eliteFourDetailScreen .elite-four-detail-button,
#tcgCardsScreen .my-cards-back-button,
#passwordScreen .options-button,
#switchCancelButton {
    font-family: 'Pokemon Pixel', sans-serif; font-size: clamp(0.9em, 3vmin, 1.2em);
    padding: 1.2vmin 2vmin;
    width: 85%; max-width: 320px;
    border-radius: 8px;
    color: #FFF; text-shadow: 1px 1px #222; cursor: pointer;
    transition: transform 0.1s, box-shadow 0.2s; text-align: center;
    border-style: solid; border-width: 2px 3px 4px 2px;
    margin-bottom: 0;
    flex-shrink: 0;
}
.screen-back-button { margin-bottom: 1vmin !important; }


#optionsMenuScreen #btnSaveGameOpt { background-color: #95a5a6; border-color: #7f8c8d; color: #2c3e50;}
#optionsMenuScreen #btnPasswordOpt { background-color: #8e44ad; border-color: #732d91; }
#optionsMenuScreen #btnResetGameOpt, #playMenuScreen #btnQuickBattlePlay { background-color: #e74c3c; border-color: #c0392b;}
#optionsMenuScreen #btnDarkModeOpt { background-color: #34495e; border-color: #2c3e50;}
.screen-back-button,
#optionsMenuScreen #btnBackToMainOpts,
#playMenuScreen #btnBackToMainFromPlay,
#marketScreen .market-back-button,
#inventoryScreen .inventory-back-button,
#teamScreen .team-back-button,
#gymLeaderSelectScreen .gym-leader-button.back,
#gymLeaderDetailScreen .gym-detail-button.back,
#myCardsScreen .my-cards-back-button,
#pcBoxScreen .pc-back-button,
#eliteFourSelectScreen .elite-four-button.back,
#eliteFourDetailScreen .elite-four-detail-button.back,
#tcgCardsScreen .my-cards-back-button,
#passwordScreen .options-button.back-button {
    background-color: #3498db !important; border-color: #2980b9 !important;
}


#playMenuScreen #btnGymBattlePlay { background-color: #f39c12; border-color: #e67e22; }
#playMenuScreen #btnWildModePlay { background-color: #2ecc71; border-color: #27ae60; }
#playMenuScreen #btnEliteBattlesPlay { background-color: #bf00ff; border-color: #a000d4; }

#optionsMenuScreen .options-button:active, #playMenuScreen .play-mode-button:active,
#marketScreen .market-back-button:active, #inventoryScreen .inventory-back-button:active,
#teamScreen .team-back-button:active, #teamSelectScreen .team-select-button:active,
#gymLeaderSelectScreen .gym-leader-button:active, #gymLeaderDetailScreen .gym-detail-button:active,
#myCardsScreen .my-cards-back-button:active, #pcBoxScreen .pc-back-button:active,
#eliteFourSelectScreen .elite-four-button:active,
#eliteFourDetailScreen .elite-four-detail-button:active,
#tcgCardsScreen .my-cards-back-button:active,
#passwordScreen .options-button:active, #switchCancelButton:active {
    transform: translateY(1px); border-bottom-width: 2px; box-shadow: none;
}

#passwordScreen { justify-content: space-between; }
.password-content-area { gap: 1.5vmin; }
/* ... (Password screen stijlen blijven hetzelfde) ... */

#gymLeaderSelectScreen .gym-leader-button:not(.screen-back-button) { background-color: #8e44ad; border-color: #732d91; width: 100%; margin-bottom: 1.5vmin;}
#gymLeaderDetailScreen, #eliteFourDetailScreen { justify-content: space-between; }
#gymLeaderDetailScreen #gymLeaderCardImage, #eliteFourDetailScreen #eliteFourCardImage { max-width: 75%; max-height: 40vh; object-fit: contain; margin-bottom: 2vmin; border: 3px solid var(--border-trainer-frame); border-radius: 10px; }
#gymLeaderDetailScreen #btnStartGymBattle { background-color: #e67e22; border-color: #d35400; }
#eliteFourSelectScreen .elite-four-button:not(.screen-back-button) { background-color: #6a0dad; border-color: #4b0082; width: 100%; margin-bottom: 1.5vmin;}
#eliteFourDetailScreen #btnStartEliteFourBattle { background-color: #800000; border-color: #5c0000; }

#myCardsScreen .cards-collection-grid, #myCardsScreen .badges-collection-grid,
#myCardsScreen #collectedEliteFourCardsGrid, #tcgCardsScreen #tcgCardsGrid { /* ... (blijft hetzelfde) ... */ }
/* ... (Badge float animatie blijft hetzelfde) ... */
.no-collected-items { /* ... (blijft hetzelfde) ... */ }

#teamSelectGrid { /* ... (blijft hetzelfde) ... */ }
/* ... (Team select option stijlen blijven hetzelfde) ... */

#marketCoinDisplay { font-size: clamp(0.9em, 3vmin, 1.2em); margin-bottom: 1vmin; flex-shrink: 0; }
.market-items-grid { /* ... (blijft hetzelfde) ... */ }
/* ... (Market item stijlen blijven hetzelfde) ... */

.inventory-grid, .team-grid { /* ... (blijft hetzelfde) ... */ }
/* ... (Inventory & Team item stijlen blijven hetzelfde) ... */

.pc-interface { /* ... (blijft hetzelfde) ... */ }
/* ... (PC Kolom, Grid, Card, Pagination stijlen blijven hetzelfde) ... */

/* Battle Screen Layout - HERZIEN VOOR MOBIEL EN SCROLLEN */
#battleScreen {
    background-image: url('https://pokemonrevolution.net/forum/uploads/monthly_2021_03/DVMT-6OXcAE2rZY.jpg.afab972f972bd7fbd4253bc7aa1cf27f.jpg') !important;
    background-size: cover; background-position: center bottom;
    display: flex; flex-direction: column;
    padding: 0; /* Battle screen beheert zijn eigen padding/layout */
    position: relative; /* Nodig voor absolute positionering van info-boxen */
}

.battle-arena {
    flex-grow: 1; /* Neemt de meeste ruimte boven de UI-balk */
    position: relative;
    width: 100%;
    min-height: 50%; /* Geef de arena een redelijke minimale hoogte */
}

#attackAnimationLayer { position: absolute; inset: 0; pointer-events: none; overflow: hidden; z-index: 50; }
.attack-animation { position: absolute; }

.pokemon-sprite {
    position: absolute;
    image-rendering: pixelated;
    width: clamp(90px, 28vmin, 190px); /* Iets aangepast voor balans */
    height: clamp(90px, 28vmin, 190px);
    transition: transform 0.3s ease-in-out;
    transform-origin: bottom center;
    z-index: 10;
}
.opponent-sprite {
    top: clamp(10%, 12vmin, 15%); /* Iets lager voor meer ruimte boven */
    right: clamp(5%, 8vmin, 12%);
    transform: scale(1.3);
}
.player-sprite {
    bottom: clamp(3%, 4vmin, 7%); /* Iets hoger van de onderkant van de arena */
    left: clamp(5%, 8vmin, 12%);
    transform: scale(2.0);
}
.opponent-sprite img, .player-sprite img { width: 100%; height: 100%; object-fit: contain; }

.battle-info-box {
    position: absolute;
    background-color: var(--battle-info-box-bg);
    border: 2px solid var(--battle-info-box-border);
    border-radius: 8px;
    padding: clamp(5px, 1vmin, 8px) clamp(7px, 1.2vmin, 10px);
    width: clamp(140px, 40vw, 240px); /* Responsieve breedte, max 40% van viewport width */
    max-width: 250px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.3);
    color: var(--battle-text-color);
    font-size: clamp(0.65em, 1.8vmin, 0.85em);
    z-index: 60;
    display: flex;
    flex-direction: column;
}
.opponent-info {
    top: 1.5vmin; /* Iets meer marge van boven */
    left: 1.5vmin;
}
.player-info {
    /* Positionering relatief aan de .battle-ui-bottom.
       De .battle-ui-bottom heeft nu een vaste hoogte van 30%.
       Dus we plaatsen de player-info net daarboven.
    */
    bottom: calc(30% + 2vmin); /* 30% (hoogte UI balk) + 2vmin marge */
    right: 1.5vmin;
}

.info-line { display: flex; justify-content: space-between; margin-bottom: 0.4vmin; align-items: center;}
.info-line .name { font-weight: bold; font-size: 1.1em; }
.info-line .status-tag { font-size: 0.8em; padding: 0.1em 0.35em; margin-left: 0.3em;}
.hp-bar-container { width: 100%; height: clamp(8px, 1.5vmin, 14px); background-color: #555; border: 1px solid #333; border-radius: 5px; overflow: hidden; margin: 0.4vmin 0; display: flex; align-items: center; }
.hp-bar-container span { font-size: clamp(0.6em, 1.4vmin, 0.75em); font-weight: bold; color: white; background-color: rgba(0,0,0,0.6); padding: 0.1vmin 0.4vmin; margin-left: 0.3vmin; border-radius: 3px; }
.player-info .hp-numbers, .opponent-info .hp-numbers { text-align: right; font-size: clamp(0.75em, 1.8vmin, 0.95em); margin-top: 0.4vmin; }
.team-status { display: flex; gap: 0.8vmin; margin-top: 0.8vmin; padding-left: 2px; }
.status-ball { width: clamp(9px, 2.2vmin, 14px); height: clamp(9px, 2.2vmin, 14px); }

.battle-ui-bottom {
    flex-shrink: 0;
    height: 30%; /* Vaste hoogte voor de onderste balk, cruciaal voor positionering player-info */
    min-height: 150px; /* Absolute minimum hoogte */
    display: flex;
    border-top: 3px solid var(--battle-ui-border);
    background-color: var(--battle-ui-bg);
    border-radius: 10px 10px 0 0;
    z-index: 70;
    box-shadow: 0 -2px 8px rgba(0,0,0,0.3);
    overflow: hidden; /* Voorkom dat kinderen erbuiten vallen */
}
.battle-textbox {
    flex-grow: 1; /* Neemt de linkerkant in beslag */
    padding: clamp(8px, 1.8vmin, 14px);
    font-size: clamp(0.85em, 2.2vmin, 1.1em);
    line-height: 1.3;
    overflow-y: auto; /* Scrollbaar als tekst te lang is */
    -webkit-overflow-scrolling: touch;
    box-sizing: border-box;
    height: 100%;
    max-height: 100%;
}
.battle-menu-container {
    flex-shrink: 0;
    width: clamp(120px, 38%, 170px); /* Consistentere breedte voor menu */
    height: 100%;
    display: flex;
    border-left: 3px solid var(--battle-ui-border);
    box-sizing: border-box;
    overflow: hidden;
}

.battle-menu {
    padding: clamp(0.6vmin, 1vmin, 1.5vmin);
    box-sizing: border-box;
    display: grid;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    width: 100%;
    height: 100%;
    align-content: flex-start; /* Zorg dat items bovenaan beginnen */
}
.battle-action-menu {
    grid-template-columns: 1fr;
    gap: clamp(0.5vmin, 0.8vmin, 1vmin);
    align-content: stretch; /* Knoppen vullen de beschikbare hoogte */
}
.battle-action-menu button {
    min-height: clamp(30px, 7vh, 45px); /* Geef actieknoppen een redelijke hoogte */
}

.battle-move-menu, .battle-item-menu {
    grid-template-columns: 1fr 1fr;
    gap: clamp(0.5vmin, 0.8vmin, 1.2vmin);
}
.battle-move-menu { grid-template-rows: 1fr 1fr auto; }
.battle-item-menu { grid-template-rows: auto; }

.battle-menu button {
    font-size: clamp(0.7em, 1.8vmin, 0.9em);
    padding: clamp(0.4vmin, 0.7vmin, 0.9vmin);
    min-height: clamp(28px, 6.5vmin, 42px);
    border-radius: 5px;
}
.battle-menu-back-button {
    font-size: clamp(0.65em, 1.6vmin, 0.8em);
    padding: clamp(0.3vmin, 0.5vmin, 0.7vmin);
    margin-top: 0.5vmin;
}
.move-name, .item-name-battle { font-size: clamp(0.65em, 1.6vmin, 0.8em); }
.move-pp, .item-count-battle { font-size: clamp(0.55em, 1.2vmin, 0.65em); }
.item-icon-battle { width: clamp(10px, 2vmin, 14px); height: clamp(10px, 2vmin, 14px); margin-right: 3px; }

/* ... (Rest van de CSS zoals shake, flash, pokeball, TCG, etc. blijft zoals in v1.3.1) ... */
/* Zorg ervoor dat de secties die ik hierboven als "... (blijft hetzelfde) ..." heb gemarkeerd,
   daadwerkelijk de correcte, volledige CSS uit je vorige werkende versie bevatten. */

@keyframes shake { 0%, 100% { transform: translateX(0) scale(var(--sprite-scale, 1)); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px) scale(var(--sprite-scale, 1)); } 20%, 40%, 60%, 80% { transform: translateX(5px) scale(var(--sprite-scale, 1)); } }
.shake-anim { animation: shake 0.5s linear; }
.opponent-sprite.shake-anim { --sprite-scale: 1.2; } .player-sprite.shake-anim { --sprite-scale: 1.85; }
@keyframes flash { 0%, 100% { filter: brightness(1); } 50% { filter: brightness(2.5); } }
.flash-anim > img { animation: flash 0.15s linear 2; }

#switchPokemonScreen { justify-content: space-between; padding-top: 3vmin; }
#switchPokemonScreen h2 { margin-bottom: 1.5vmin; }
.switch-grid { gap: 1vmin; }
.switch-option { padding: 8px; gap: 8px; border-width: 2px; }
.switch-option img { width: clamp(30px, 8vmin, 40px); height: clamp(30px, 8vmin, 40px); }
.switch-info { font-size: clamp(0.65em, 1.8vmin, 0.8em); }
.switch-info .name { font-size: 1.1em; margin-bottom: 3px; }
.switch-info .hp-bar-container { height: clamp(6px, 1.1vmin, 8px); margin-bottom: 2px; }
.switch-info .hp-numbers { font-size: 0.8em; }
#switchCancelButton { margin-top: 2vmin; }

.pokeball-throw-animation { position: absolute; width: clamp(20px, 5vmin, 30px); height: clamp(20px, 5vmin, 30px); background-image: var(--item-icon-pokeball); background-size: contain; background-repeat: no-repeat; z-index: 100; animation: throwAndWiggle 3.5s forwards; transform-origin: center bottom; }
@keyframes throwAndWiggle { 0% { transform: translate(0,0) scale(1) rotate(0deg); opacity: 1;} 15% { transform: translate(calc(var(--target-x) / 2), calc(var(--target-y) / 2 - 50px)) scale(1.2) rotate(-180deg); opacity: 1;} 30% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-360deg); opacity: 1;} 32% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-360deg); opacity: 1;} 40% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-375deg); opacity: 1;} 50% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-345deg); opacity: 1;} 60% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-370deg); opacity: 1;} 70% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-350deg); opacity: 1;} 80% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-365deg); opacity: 1;} 90% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-355deg); opacity: 1;} 95% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-360deg); opacity: 1;} 100% { transform: translate(var(--target-x), var(--target-y)) scale(1.5) rotate(-360deg); opacity: 1;} }
.pokemon-caught-flash > img { animation: flash 0.15s linear 3; }

.tcg-pack-animation-container { padding: 20px; text-align: center; font-size: 1.5em; color: var(--text-color-default); }
.revealed-tcg-card-container { display: flex; flex-direction: column; align-items: center; gap: 15px; background-color: rgba(0,0,0,0.7); padding: 20px; border-radius: 10px; border: 2px solid gold; }
#revealedTcgCardImage { max-width: 80%; max-height: 60vh; object-fit: contain; border: 3px solid gold; border-radius: 10px; box-shadow: 0 0 15px rgba(255, 215, 0, 0.5); }
#revealedTcgCardName { font-size: 1.2em; font-weight: bold; color: var(--text-color-default); margin-top: 10px; }
#closeTcgRevealButton { font-family: 'Pokemon Pixel', sans-serif; font-size: 1em; padding: 10px 20px; background-color: var(--battle-button-bg); color: var(--battle-text-color); border: 2px solid var(--battle-button-border); border-radius: 8px; cursor: pointer; margin-top: 15px; }
#closeTcgRevealButton:hover { background-color: var(--battle-button-hover-bg); }